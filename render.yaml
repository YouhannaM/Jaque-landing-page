services:
  # Static landing page
  - type: web
    name: jaque-landing-page
    env: static
    staticPublishPath: .
    buildCommand: ""
    headers:
      - path: /assets/*
        name: Cache-Control
        value: public, max-age=31536000, immutable
      - path: /*
        name: Cache-Control
        value: no-cache

  # FastAPI backend (requires DATABASE_URL + REDIS_URL set in Render dashboard)
  - type: web
    name: jaque-backend
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free
    envVars:
      - key: DATABASE_URL
        sync: false
      - key: REDIS_URL
        sync: false
      - key: SECRET_KEY
        generateValue: true
      - key: DEBUG
        value: "False"
